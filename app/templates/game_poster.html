{% extends 'base.html' %}

{% block content %}
<div class="game-container">
  <div class="game-header">
    <h2 class="game-title-page">Poster Reveal Challenge</h2>
    <p class="hero-subtitle">Can you identify the movie from its poster?</p>
  </div>

  <!-- Scratch-off Poster Display -->
  <div class="scratch-poster-container">
    <div class="scratch-poster-wrapper">
      <img id="posterImg" class="poster-image" alt="Movie poster" />
      <div id="scratchOverlay" class="scratch-overlay">
        <div class="scratch-surface"></div>
        <svg class="scratch-holes" width="100%" height="100%">
          <!-- Scratch holes will be dynamically added here -->
        </svg>
      </div>
    </div>
  </div>

  <!-- Scratch Button -->
  <div class="text-center mb-4">
    <button id="scratchBtn" class="btn btn-secondary">
      <svg class="btn-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 14c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM20.71 4.63l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"/>
      </svg>
      Scratch Off
      <span id="scratchCount" class="scratch-counter">(4 left)</span>
    </button>
  </div>

  <!-- Input Section -->
  <div class="input-group">
    <div class="input-container">
      <input 
        id="guessInput" 
        class="form-control" 
        placeholder="Enter movie title..."
        autocomplete="off"
      >
      <div id="customDropdown" class="custom-dropdown"></div>
    </div>
    <button class="btn btn-primary" id="guessBtn">
      Submit Guess
      <svg class="btn-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
      </svg>
    </button>
  </div>

  <!-- Result Display -->
  <div id="posterAnswer"></div>

  <!-- Game Controls -->
  <div class="game-controls mt-4 text-center">
    <button class="btn btn-secondary" onclick="location.reload()">
      <svg class="btn-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
      </svg>
      New Game
    </button>
  </div>
</div>

<script src="{{ url_for('static', filename='poster.js') }}"></script>
{% endblock %}