{% extends 'base.html' %}

{% block content %}
<div class="game-container">
  <div class="game-header">
    <h2 class="game-title-page">Guess the Release Year</h2>
    <p class="hero-subtitle">Test your knowledge of movie release dates</p>
  </div>

  <!-- Movie Info Display -->
  <div class="movie-info-card">
    <h3 id="movieTitle" class="movie-title mb-3">Loading...</h3>
    <div id="movieSummary" class="movie-summary mb-4"></div>
    
    <!-- Cast Section -->
    <div id="movieCastSection" class="movie-cast-section" style="display: none;">
      <h4 class="cast-section-title">Starring</h4>
      <div id="movieCast" class="movie-cast-grid"></div>
    </div>
  </div>

  <!-- Year Input Section -->
  <div class="input-group">
    <input 
      type="number" 
      id="yearInput" 
      class="form-control" 
      placeholder="Enter year (e.g., 1999)"
      min="1900"
      max="2030"
    >
    <button class="btn btn-primary" id="yearGuess">
      Submit Guess
      <svg class="btn-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
      </svg>
    </button>
  </div>

  <!-- Result Display -->
  <div id="yearResult"></div>

  <!-- Game Controls -->
  <div class="game-controls mt-4 text-center">
    <button class="btn btn-secondary" id="nextBtn" style="display: none;">
      <svg class="btn-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
      </svg>
      Next Movie
    </button>
    <button class="btn btn-secondary" onclick="location.reload()">
      <svg class="btn-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
      </svg>
      New Game
    </button>
  </div>
</div>

<script src="{{ url_for('static', filename='year.js') }}"></script>

<style>
.movie-info-card {
  background-color: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: var(--shadow-md);
}

.movie-title {
  font-size: 1.75rem;
  color: var(--text-primary);
  font-weight: 700;
}

.movie-summary {
  color: var(--text-secondary);
  line-height: 1.6;
  max-width: 700px;
  margin: 0 auto;
}

.movie-cast-section {
  margin-top: 2rem;
  border-top: 1px solid var(--border-color);
  padding-top: 2rem;
}

.cast-section-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 1rem;
  text-align: center;
}

.movie-cast-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 1rem;
  justify-items: center;
  max-width: 500px;
  margin: 0 auto;
}

.movie-cast-member {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.movie-cast-photo {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 0.5rem;
  box-shadow: var(--shadow-sm);
  border: 2px solid var(--border-color);
}

.movie-cast-name {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.2;
  max-width: 90px;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.movie-cast-placeholder {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-hover));
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 0.5rem;
  font-size: 1.5rem;
  color: var(--text-secondary);
  border: 2px solid var(--border-color);
}

#yearQuestion {
  display: none;
}
</style>
{% endblock %}